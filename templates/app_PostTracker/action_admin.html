<br>
Post Tracker 	
<button class="btn btn-primary btn-sm float-right" data-toggle="modal" data-target="#about">About&nbsp;&nbsp;<span class="glyphicon glyphicon-info-sign icon-white"></span>
</button>
<br>
<div class="modal fade" id="about" tabindex="-1" role="dialog" aria-labelledby="about1" aria-hidden="true">
<!-- <div id="about" class="modal hide"> -->
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">PostTracker</h4>
			</div>
			<div class="modal-body">
				<p class="float-left"> Модуль отслеживания почтовых отправлений.<br>
				Обсуждение модуля <a href="http://majordomo.smartliving.ru/forum/viewtopic.php?f=5&t=3385" target="_blank">здесь</a>.<br>
				</p>
				<hr size="1">
				<div class="float-right">
                <div class="ewm-widget-donate" data-guid="076ef900-156a-40cc-a7c8-c48f9f6ca64d" data-type="compact"></div>
                <script type="text/javascript">//<!--
                (function(w, d, id) {
                    w.ewmAsyncWidgets = function() { EWM.Widgets.init(); };
                    if (!d.getElementById(id)) {
                        var s = d.createElement('script'); s.id = id; s.async = true; s.src = '//events.webmoney.ru/js/ewm-api.js?11';
                        (d.getElementsByTagName('head')[0] || d.documentElement).appendChild(s);
                    }
                })(window, document, 'ewm-js-api');
                //--></script>
                <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                <input type="hidden" name="cmd" value="_s-xclick">
                <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
                ">
                <input type="image" src="https://www.paypalobjects.com/en_US/RU/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                </form>
                </div>
				<p class="float-left">
				Поддержать автора материально:
				<ul>
					<li>Yandex: 410012076838296</li>
					<li>WebMoney: R366396529511</li>
				</ul>
                </p>
			</div>
			
			<div class="modal-footer">
				<div class="pull-left">Telegram: <a href="https://telegram.me/Eraser1981" target="_blank">@Eraser1981</a> :)</div>
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<form action="?" method="post" enctype="multipart/form-data" name="frmEdit" class="form-horizontal">
<script type="text/javascript">
	function OnSelectConType (select) {    
	    var fDiv0 = document.getElementById('set_track24');
		var fDiv1 = document.getElementById('set_gdeposylka');
		var fDiv2 = document.getElementById('set_russianpost');
		var fDiv3 = document.getElementById('set_moyaposylka');
		fDiv0.style.display = (select.value == 0) ? 'block' : 'none';
		fDiv1.style.display = (select.value == 1) ? 'block' : 'none';
		fDiv2.style.display = (select.value == 2) ? 'block' : 'none';
		fDiv3.style.display = (select.value == 4) ? 'block' : 'none';
	}
</script> 
<fieldset>
	<div class="form-group">
		<label class="control-label col-lg-4">Provider: </label>
		<div class="col-lg-7">
			<select name="provider" class="form-control" id="provider" onchange="OnSelectConType(this)">
				<option value="0"[#if PROVIDER=="0"#] selected[#endif#]>Track24 (API)</option>
				<option value="1"[#if PROVIDER=="1"#] selected[#endif#]>Gdeposylka (API)</option>
				<option value="2"[#if PROVIDER=="2"#] selected[#endif#]>Russian Post (API)</option>   
				<option value="3"[#if PROVIDER=="3"#] selected[#endif#]>17Track (unofficial)</option>  
				<option value="4"[#if PROVIDER=="4"#] selected[#endif#]>Moyaposylka.ru(API)</option> 				
			</select>
		</div>
	</div>
	<div id="set_track24">
		<div class="form-group">
			<label class="control-label">Api key:</label>
			<div class="col-lg-7"><input type="text" name="tr24_apikey" value="<#TR24_APIKEY#>" class="form-control"></div>
		</div>
		<div class="form-group">
			<label class="control-label">Domain:</label>
			<div class="col-lg-7"><input type="text" name="tr24_domain" value="<#TR24_DOMAIN#>" class="form-control"></div>
		</div>
	</div>
	<div id="set_gdeposylka">
		<div class="form-group">
			<label class="control-label">Api key:</label>
			<div class="col-lg-7"><input type="text" name="gp_apikey" value="<#GP_APIKEY#>" class="form-control"></div>
		</div>
	</div>
	<div id="set_russianpost">
		<div class="form-group">
			<label class="control-label">Login:</label>
			<div class="col-lg-7"><input type="text" name="rp_login" value="<#RP_LOGIN#>" class="form-control"></div>
		</div>
		<div class="form-group">
			<label class="control-label">Password:</label>
			<div class="col-lg-7"><input type="text" name="rp_password" value="<#RP_PASSWORD#>" class="form-control"></div>
		</div>
	</div>
	<div id="set_moyaposylka">
		<div class="form-group">
			<label class="control-label">Api key:</label>
			<div class="col-lg-7"><input type="text" name="mp_apikey" value="<#MP_APIKEY#>" class="form-control"></div>
		</div>
	</div>
<script type="text/javascript">  
	OnSelectConType ( document.getElementById('provider') );
</script> 
<div class="form-group ">
	<label class="control-label" for="inputTitle">Execute new status:</label>
	<div class="col-lg-5">
		<select name="script_newstatus_id" class="form-control [#if ERR_SCRIPT_ID#]alert-danger[#endif#]">
			<option value="0">
			[#begin SCRIPTS#]
			<option value="[#ID#]"[#if ID="<#SCRIPT_NEWSTATUS_ID#>"#] selected[#endif#]>[#TITLE#]
			[#end SCRIPTS#]
		</select>
	</div>
</div> 
<div class="form-group ">
	<label class="control-label" for="inputTitle">Execute dispute time:</label>
	<div class="col-lg-5">
		<select name="script_dispute_id" class="form-control [#if ERR_SCRIPT_ID#]alert-danger[#endif#]">
			<option value="0">
			[#begin SCRIPTS#]
			<option value="[#ID#]"[#if ID="<#SCRIPT_DISPUTE_ID#>"#] selected[#endif#]>[#TITLE#]
			[#end SCRIPTS#]
		</select>
	</div>
</div>
<div class="form-group">
 <label class="control-label">Debug:</label>
 <div class="controls"><input type="checkbox" name="post_debug" value="1"[#if POST_DEBUG="1"#] checked[#endif#]></div>
</div>
<div class="form-actions">
<button type="submit" name="subm" value="Submit" class="btn btn-primary"><#LANG_UPDATE#></button>
<input type="hidden" name="view_mode" value="update_settings">
<input type="hidden" name="mode" value="update">
</div>
</fieldset>
</form>
<br>
<div class="panel panel-default">
	<div class="panel-heading">
		Отображение списка треков 
	</div>
	<div class="panel-body">
		Создайте в домашних страницах блок html кода с содержимым:<p><b>					
		[#module name=&quot;app_PostTracker&quot;
		#]</b></p>
        <br>
        Или через <a href="../apps/app_PostTracker.html">меню приложений</a>
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
		Как автоматизировать проверку треков?
	</div>
	<div class="panel-body">
		Через системный cron 
        <code style="display:block">0 8,17 * * * php /var/www/modules/app_PostTracker/check_track.php</code>
        <br>
        Через MJD c использованием onNewHour, либо модуля <a href='http://majordomo.smartliving.ru/forum/viewtopic.php?f=5&t=2977'>Cron</a>
        <code style="display:block">getURL('http://localhost/modules/app_PostTracker/check_track.php',0);</code>

        или так
        
        <code style="display:block">
        require_once(DIR_MODULES . '/app_PostTracker/app_PostTracker.class.php');<br>
        $PostTracker = new app_PostTracker();<br>
        $PostTracker->updateStatuses();
        </code>
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
		Параметры передаваемые в скрипты 
	</div>
	<div class="panel-body">
		$params['<b>NAME</b>'] - имя<br>
        $params['<b>TRACK</b>'] - трек номер<br>
        $params['<b>TRACK_URL</b>'] - url<br>
        $params['<b>DATE</b>'] - время последнего статуса<br>
        $params['<b>STATUS</b>'] - последний статус<br>
        $params['<b>LOCATION</b>'] - последнее местоположение<br>
        $params['<b>DISPUTE</b>'] - дней до открытия диспута<br>
	</div>
</div>

